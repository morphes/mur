<?php $categories = $block->getCategoryTree(); ?> <div class="block_relatedlinks"><div class="block_relatedlinks-title"><strong> <span>Categories</span></strong></div><div class="block_relatedlinks-content"><ul><?php foreach ($categories as $categoryUrl => $categoryData): ?> <?php $categoryArray = explode("*", $categoryData, 2); ?> <?php $categoryId = $categoryArray[0]; $categoryName = $categoryArray[1]; ?> <?php $postCount = $block->getTotalPosts($categoryId); ?> <?php $categoryPlain = str_replace( '&nbsp;', '', $categoryName ); ?> <?php if($postCount) { ?> <li class="news-item-<?php echo $categoryId; ?>"><a href="<?php echo $block->getCatUrl($categoryUrl); ?>" title="View all posts filed under <?php echo $categoryPlain ?>"><?php echo $categoryName ?></a> <?php echo ' (' . $postCount . ')'; ?></li> <?php } ?> <?php endforeach; ?></ul></div></div>