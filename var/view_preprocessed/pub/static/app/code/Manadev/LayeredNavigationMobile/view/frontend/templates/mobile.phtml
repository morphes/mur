<?php /** * @copyright Copyright (c) http://www.manadev.com * @license http://www.manadev.com/license Proprietary License */ /** * @var $block \Manadev\LayeredNavigationMobile\Blocks\MobileNavigation * * Based on app/code/Magento/LayeredNavigation/view/frontend/templates/layer/view.phtml (diff to check * what has changed). */ ?> <?php if ($block->isVisible()): ?> <div class="mana-filter-block mana-mobile" data-mage-init='<?php echo $block->getWholeBlockJSON(); ?>'><dl class="filter-options" data-role="collapsible"><dt data-role="title"><div class="m-filter-title" data-role="trigger"><?php echo __('Filter') ?> <span class="collapse-indicator">&nbsp;</span></div><?php if ($block->hasState()): ?> <?php if ($block->isAppliedFilterVisible()): ?> <ol class="m-applied-filters items"><?php foreach ($block->getAppliedFilters() as $engineFilter): ?> <?php foreach ($engineFilter->getAppliedItems() as $item) : ?> <li class="item"><?php echo $block->renderAppliedItem($engineFilter, $item) ?></li> <?php endforeach; ?> <?php endforeach; ?></ol><?php endif; ?> <a href="<?php echo $block->getClearUrl() ?>"<?php echo $block->getClearLinkAttributes() ?> class="action clear filter-clear"><span><?php echo __('Clear All') ?></span></a> <?php endif; ?> <?php echo $block->getApplyHtml() ?></dt><dd class="block-content" data-role="content" <?php echo $block->getMobileBehaviorParent(); ?>><!-- >--><?php foreach ($block->getFilters() as $filter): ?> <dl <?php echo $block->getMobileBehaviorChild($filter); ?>><dt data-role="title"><?php echo __($filter->getName()) ?> <span class="collapse-indicator">&nbsp;</span> <?php if($filter->isApplied()): ?> <div class="filter-remove"><a href="<?php echo $block->getRemoveFilterUrl($filter) ?>"<?php echo $block->getRemoveFilterLinkAttributes($filter) ?> class="action remove"><span>X</span></a></div><?php endif; ?></dt><dd class="filter-options-content" data-role="content"><div class="m-accordion-container"><?php echo $block->renderFilter($filter); ?></div></dd></dl><?php endforeach; ?></dd></dl></div><?php if($block->getScripts()) : ?> <script type="text/x-magento-init">
            <?php echo $block->renderScripts() ?></script><?php endif; ?> <?php if ($block->getMobileMaxWidth()) : ?> <script>
        require(['jquery'], function ($) {
            
            if ($(window).width() <= <?php echo $block->getMobileMaxWidth() ?>) {
                $('body').addClass('mana-mobile-layered-navigation-enabled');
            }
        });</script><?php endif; ?> <?php endif; ?>